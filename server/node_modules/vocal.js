
var sys = require('sys'),
    exec = require('child_process').exec;

function puts(error, stdout, stderr) { sys.puts(stdout) }

exports.synthetize = function(text, lang, encoding) {
    // Default parameters
    lang = lang || 'en';
    encoding = encoding || 'UTF-8';

    // Constructing google speech api request
    request = 'http://translate.google.com/translate_tts?ie=' + encoding + '&tl=' + lang + '&q=' + text.replace(/ /g, '+');

    // Using mplayer program to play mp3 received
    exec('mplayer "' + request + '" > /dev/null', puts);
}

/*
 * Usage: 
 * synthetize('Hi Xavier, you just received a new mail. You should take a look !', 'en');
 */
